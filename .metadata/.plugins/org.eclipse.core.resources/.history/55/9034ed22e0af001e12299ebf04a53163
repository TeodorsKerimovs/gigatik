/*
 * gpio.c
 *
 *  Created on: Jan 10, 2024
 *      Author: teodors.kerimovs
 */

#include "gpio.h"

void ConfigureGPIO(void)
{
	// For Button
	GPIOC->CRH &= ~(0xf<<20);  // clear bits (23:22:21:20)
	GPIOC->CRH |= (0x8<<20); // sets to 1:0:0:0)
	GPIOC->ODR &= (1<<13);
	// Enable peripheral clocks: PORTA
	RCC->APB2ENR |= RCC_APB2ENR_IOPAEN;
	// For LED
	GPIOA->CRL &= ~GPIO_CRL_CNF5_Msk; // Clears CNF to set it for output
	GPIOA->CRL |= GPIO_CRL_MODE5_Msk; // Sets Mode, to 11 to make it as output


	// For LED 0
	if(LED_0_GPIOB_PIN == 0){
		GPIOB->CRL &= ~GPIO_CRL_CNF0_Msk;
		GPIOB->CRL |= GPIO_CRL_MODE0_Msk;
	}
	else if(LED_0_GPIOB_PIN == 1){
		GPIOB->CRL &= ~GPIO_CRL_CNF1_Msk;
		GPIOB->CRL |= GPIO_CRL_MODE1_Msk;
	}
	else if(LED_0_GPIOB_PIN == 2){
		GPIOB->CRL &= ~GPIO_CRL_CNF2_Msk;
		GPIOB->CRL |= GPIO_CRL_MODE2_Msk;
	}
	else if(LED_0_GPIOB_PIN == 3){
		GPIOB->CRL &= ~GPIO_CRL_CNF3_Msk;
		GPIOB->CRL |= GPIO_CRL_MODE3_Msk;
	}

}
